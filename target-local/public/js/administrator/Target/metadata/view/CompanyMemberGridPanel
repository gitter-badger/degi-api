{
    "type": "Ext.grid.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "defaultListenerScope": true,
        "designer|userAlias": "companymembergridpanel",
        "designer|userClassName": "CompanyMemberGridPanel",
        "height": null,
        "id": "companymembergridpanel",
        "sortableColumns": null,
        "store": [
            "{CompanyMemberStore}"
        ],
        "title": null,
        "width": null
    },
    "name": "MemberGridPanel1",
    "configAlternates": {
        "store": "binding"
    },
    "designerId": "6f8d9315-4a97-45ea-bbff-aa76a3cb7f11",
    "viewControllerInstanceId": "0c149c73-5c29-4a22-b961-debc8916859a",
    "viewModelInstanceId": "bf304d29-b568-4588-80ae-d3833b3c4007",
    "cn": [
        {
            "type": "Ext.grid.View",
            "reference": {
                "name": "viewConfig",
                "type": "object"
            },
            "codeClass": null,
            "userConfig": {
                "disableSelection": null
            },
            "name": "MyGridView1",
            "designerId": "98ab0130-e39f-4efb-a157-aa214d73f9ee"
        },
        {
            "type": "Ext.selection.CheckboxModel",
            "reference": {
                "name": "selModel",
                "type": "object"
            },
            "codeClass": null,
            "userConfig": {
                "mode": "SINGLE"
            },
            "name": "MyCheckboxSelectionModel1",
            "designerId": "bae7fe67-7b48-455d-9f58-d2d6033627bd"
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dataIndex": "cm_id",
                "flex": 0.5,
                "text": "編號"
            },
            "name": "MyColumn3",
            "designerId": "710fba96-185f-49c4-bbeb-72dfeefb98f5"
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dataIndex": "cm_account",
                "flex": 1,
                "text": "登入帳號"
            },
            "name": "MyColumn",
            "designerId": "e1506759-8e7b-4df0-a25a-b6c36444cf94"
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dataIndex": "cm_title",
                "flex": 1,
                "text": "公司名稱"
            },
            "name": "MyColumn12",
            "designerId": "207cafee-1466-4da4-a950-2a4f46bae053"
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dataIndex": "cm_contact_name",
                "flex": 1,
                "text": "窗口姓名"
            },
            "name": "MyColumn10",
            "designerId": "d69a14ef-3318-47fb-8f60-2931e051be89"
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dataIndex": "cm_contact_phone",
                "flex": 1,
                "text": "窗口電話"
            },
            "name": "MyColumn11",
            "designerId": "080712c5-5272-48ad-9da7-be4554ce5eab"
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dataIndex": "cm_status",
                "flex": 0.5,
                "text": "啟／停用"
            },
            "name": "MyColumn46",
            "designerId": "edd72c7a-0082-423d-bab1-db9df5afea44",
            "cn": [
                {
                    "type": "fixedfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|params": [
                            "value",
                            "metaData",
                            "record",
                            "rowIndex",
                            "colIndex",
                            "store",
                            "view"
                        ],
                        "fn": "renderer",
                        "implHandler": [
                            "if( value == 1 ){",
                            "    return '啟用';",
                            "}else{",
                            "    return '停用';",
                            "}"
                        ]
                    },
                    "name": "renderer",
                    "designerId": "ec027551-abfd-4d07-bd7e-bf3c3e463322"
                }
            ]
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dataIndex": "cm_created",
                "flex": 1,
                "text": "建立時間"
            },
            "name": "MyColumn24",
            "designerId": "7bcd08ba-3c90-4cf9-978b-9a16e1a0abad"
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top"
            },
            "name": "MyToolbar1",
            "designerId": "86d24ed8-53b7-4fe2-a456-25ab2da44168",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "功能"
                    },
                    "name": "MyButton14",
                    "designerId": "8092146d-a63c-4920-a77e-40ca9ed0537b",
                    "cn": [
                        {
                            "type": "Ext.menu.Menu",
                            "reference": {
                                "name": "menu",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "width": 120
                            },
                            "name": "MyMenu",
                            "designerId": "526888d5-d76f-4d3b-a2f4-e7b0568f9322",
                            "cn": [
                                {
                                    "type": "Ext.menu.Item",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "text": "新增"
                                    },
                                    "name": "MyMenuItem",
                                    "designerId": "3dc683fa-7f81-404e-b9ac-377955c7e936",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onMenuitemClick",
                                                "implHandler": [
                                                    "var window = Ext.create('Target.view.CompanyMemberWindow');",
                                                    "",
                                                    "window.setConfig('title', '新增公司會員');",
                                                    "",
                                                    "Ext.getCmp('cmUpdateBtn').setVisible(false);",
                                                    "Ext.getCmp('cmAddBtn').setVisible(true);",
                                                    "",
                                                    "window.show();"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "name": "onMenuitemClick",
                                            "designerId": "9e8cfca9-4dda-4fb2-b903-8b85a7eaf448"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.menu.Item",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "text": "修改"
                                    },
                                    "name": "MyMenuItem1",
                                    "designerId": "a5d29aba-639c-4665-9786-5b50596e4499",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onMenuitemClick1",
                                                "implHandler": [
                                                    "var selmodel = Ext.getCmp('companymembergridpanel').getSelectionModel();",
                                                    "var count = selmodel.getCount();",
                                                    "",
                                                    "if(count !== 0){",
                                                    "    var seldata = selmodel.getSelection();",
                                                    "",
                                                    "    var window = Ext.create('Target.view.CompanyMemberWindow');",
                                                    "",
                                                    "    Ext.getCmp('cm_id').setValue(seldata[0].data.cm_id);",
                                                    "    Ext.getCmp('cm_passwordTemp').setValue(seldata[0].data.cm_password);",
                                                    "",
                                                    "    window.setConfig('title', '修改公司會員');",
                                                    "",
                                                    "    Ext.getCmp('companymemberForm').getForm().setValues(seldata[0].data);",
                                                    "",
                                                    "    Ext.getCmp('cm_account').setDisabled(true);",
                                                    "",
                                                    "    Ext.getCmp('cmAddBtn').setVisible(false);",
                                                    "    Ext.getCmp('cmUpdateBtn').setVisible(true);",
                                                    "",
                                                    "    window.show();",
                                                    "}else{",
                                                    "    Ext.Msg.alert('訊息', '請選擇一個公司會員修改');",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "name": "onMenuitemClick1",
                                            "designerId": "f5b1abd5-0c90-4984-986a-b3370e4f73dd"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "配送點"
                    },
                    "name": "MyButton18",
                    "designerId": "db87e98a-bc7e-481f-a1f2-d653f14c964d",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onButtonClick2",
                                "implHandler": [
                                    "var selmodel = Ext.getCmp('companymembergridpanel').getSelectionModel();",
                                    "var count = selmodel.getCount();",
                                    "var seldata = selmodel.getSelection();",
                                    "",
                                    "if(count !== 0 ){",
                                    "",
                                    "    var window = Ext.create('Target.view.CMPointWindow');",
                                    "",
                                    "    window.setConfig('title', '公司會員配送點管理');",
                                    "",
                                    "",
                                    "    Ext.Ajax.request({",
                                    "",
                                    "        url: 'http://dev.finpo.com.tw/degi-api/target-local/public/b/company_member_point?cm_id='+seldata[0].data.cm_id,",
                                    "        success: function(response, opts){",
                                    "",
                                    "            var obj = Ext.JSON.decode(response.responseText);",
                                    "            var store = Ext.getCmp('cmpointpanel').getStore();",
                                    "",
                                    "            if(obj.rows){",
                                    "                store.removeAll();",
                                    "                var cmp = Ext.JSON.decode(obj.rows);",
                                    "                //console.log(cmp);",
                                    "",
                                    "                for( var i=0; i<(cmp.length); i++){",
                                    "                    store.add({",
                                    "                        cm_id: cmp[i].cm_id,",
                                    "                        cmp_address: cmp[i].cmp_address,",
                                    "                        cmp_id: cmp[i].cmp_id,",
                                    "                        cmp_name: cmp[i].cmp_name,",
                                    "                        cmp_shipping_fee: cmp[i].cmp_shipping_fee",
                                    "",
                                    "                    });",
                                    "                }",
                                    "            }else{",
                                    "                store.removeAll();",
                                    "            }",
                                    "        },",
                                    "        failure: function(response, opts){",
                                    "            console.log('server-side failure with status code ' + response.status);",
                                    "        }",
                                    "",
                                    "    });",
                                    "    Ext.getCmp('cm_id_point').setValue(seldata[0].data.cm_id);",
                                    "    window.show();",
                                    "}else{",
                                    "    Ext.Msg.alert('訊息', '請選擇一筆公司會員管理配送點資訊');",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onButtonClick2",
                            "designerId": "3c625cfc-af79-4ecd-9a27-cc1dc91cfac6"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "公司可訂購商品"
                    },
                    "name": "MyButton19",
                    "designerId": "8e671afa-aa55-437e-98e2-51b1c0886b88",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onButtonClick3",
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onButtonClick3",
                            "designerId": "1df39932-69e0-44a1-9832-e2e66f1ad7cf"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "emptyText": "公司名稱/登入帳號 搜尋",
                        "fieldLabel": null,
                        "id": "CompanyMemberNameField",
                        "layout|flex": null,
                        "margin": null,
                        "name": "companymembernamefield"
                    },
                    "name": "MyTextField",
                    "configAlternates": {
                        "margin": "binding"
                    },
                    "designerId": "cfad7dea-ae5f-47f0-96a6-b19823dedd8d",
                    "configMeta": {
                        "margin": {
                            "bindSingle": true
                        }
                    }
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "查詢"
                    },
                    "name": "MyButton4",
                    "designerId": "faa5b5bf-58e3-4d9b-8598-a8c0233dba53",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onButtonClick",
                                "implHandler": [
                                    "var mName = Ext.getCmp('CompanyMemberNameField').getValue();",
                                    "var store  = Ext.getCmp('companymembergridpanel').getViewModel().getStore('CompanyMemberStore');",
                                    "",
                                    "store.proxy.url='http://dev.finpo.com.tw/degi-api/target-local/public/b/company_member?q='+mName;",
                                    "store.load();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onButtonClick",
                            "designerId": "be83e76e-6194-4442-ba73-646c88537c26"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "editable": false,
                        "emptyText": "狀態查詢",
                        "fieldLabel": "",
                        "id": "memberStatusSelector1",
                        "layout|flex": null,
                        "queryMode": "local",
                        "store": [
                            "{MemberStatusStore}"
                        ],
                        "triggerAction": null,
                        "valueField": "cm_status"
                    },
                    "name": "MyComboBox1",
                    "configAlternates": {
                        "store": "binding"
                    },
                    "designerId": "a634d7ca-d9fd-4256-a8f6-3743a4f00c8f",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onComboboxChange1",
                                "implHandler": [
                                    "var mStatus = Ext.getCmp('memberStatusSelector1').getValue();",
                                    "var store  = Ext.getCmp('companymembergridpanel').getViewModel().getStore('CompanyMemberStore');",
                                    "if( mStatus === '' ){",
                                    "    store.proxy.url='http://dev.finpo.com.tw/degi-api/target-local/public/b/company_member';",
                                    "}else{",
                                    "    store.proxy.url='http://dev.finpo.com.tw/degi-api/target-local/public/b/company_member?s='+mStatus;",
                                    "}",
                                    "store.load();"
                                ],
                                "name": "change",
                                "scope": "me"
                            },
                            "name": "onComboboxChange1",
                            "designerId": "354facbb-4e89-4841-b809-41cf7ae55d82"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onComboboxFocus1",
                                "implHandler": [
                                    "var mStatus = Ext.getCmp('memberStatusSelector1').setValue('');"
                                ],
                                "name": "focus",
                                "scope": "me"
                            },
                            "name": "onComboboxFocus1",
                            "designerId": "4670dacc-284b-4431-a99a-3a49d6fd3eeb"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "清除搜尋結果"
                    },
                    "name": "MyButton8",
                    "designerId": "baf7fae1-2bc2-4b68-a209-fd1bafb412e5",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onButtonClick1",
                                "implHandler": [
                                    "var store  = Ext.getCmp('companymembergridpanel').getViewModel().getStore('CompanyMemberStore');",
                                    "store.proxy.url='http://dev.finpo.com.tw/degi-api/target-local/public/b/company_member';",
                                    "",
                                    "Ext.getCmp('CompanyMemberNameField').setValue('');",
                                    "Ext.getCmp('memberStatusSelector1').setValue('');",
                                    "",
                                    "store.load();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onButtonClick1",
                            "designerId": "060491ce-8e6f-4ece-bc53-ce981c4ba901"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.toolbar.Paging",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "displayInfo": true,
                "dock": "bottom",
                "store": [
                    "{CompanyMemberStore}"
                ],
                "width": 360
            },
            "name": "MyPagingToolbar",
            "configAlternates": {
                "store": "binding"
            },
            "designerId": "4bab118e-f281-4fec-b6dc-c7181c8b7e3c"
        }
    ]
}